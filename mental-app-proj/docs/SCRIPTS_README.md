# סקריפטים להרצת Mental Coach

## סקריפטים זמינים

### 1. `run-all.sh` - סקריפט מלא עם תפריט
סקריפט מקיף עם תפריט אינטראקטיבי להתקנה והרצה של כל רכיבי המערכת.

**הרצה:**
```bash
./run-all.sh
```

**אפשרויות בתפריט:**
- **1) התקנה והרצה מלאה** - מתקין את כל התלויות ומריץ את כל הרכיבים
- **2) התקנת תלויות בלבד** - מתקין תלויות ללא הרצה
- **3) הרצה בלבד** - מריץ את המערכת ללא התקנת תלויות
- **4-6) הרצת רכיב בודד** - API / Admin / Flutter
- **7) יציאה**

### 2. `quick-start.sh` - הרצה מהירה
סקריפט פשוט להרצה מהירה של כל הרכיבים ללא תפריט.

**הרצה:**
```bash
./quick-start.sh
```

### 3. `run-simulator.sh` - הרצת Flutter על סימולטור
סקריפט ייעודי להרצת אפליקציית Flutter על סימולטור iPhone.

**הרצה:**
```bash
# ברירת מחדל - iPhone 16
./run-simulator.sh

# בחירת סימולטור
./run-simulator.sh --select

# סימולטור ספציפי
./run-simulator.sh "iPhone 16 Pro"

# עזרה
./run-simulator.sh --help
```

**תכונות:**
- 🎯 ברירת מחדל: iPhone 16
- 📱 תמיכה בבחירת סימולטור
- 🔄 הפעלה אוטומטית של סימולטור
- ✅ בדיקה ש-API רץ

## תכונות הסקריפטים

### בדיקות אוטומטיות:
- ✅ בדיקת התקנת Node.js, npm ו-Flutter
- ✅ בדיקה ש-MongoDB רץ
- ✅ בדיקת פורטים תפוסים
- ✅ יצירת קובץ `.env` אם חסר

### ניהול תהליכים:
- 🔄 הרצת שירותים ברקע
- 🛑 עצירה אוטומטית של כל השירותים ב-Ctrl+C
- 📝 שמירת לוגים ב-`api.log` ו-`admin.log`

### סדר הרצה:
1. **API Server** (פורט 3000) - חייב לרוץ ראשון
2. **Admin Panel** (פורט 5173) - תלוי ב-API
3. **Flutter App** - תלוי ב-API (רץ על סימולטור iPhone 16 כברירת מחדל)

## דרישות מערכת

### תוכנות נדרשות:
- **Node.js** (v14 ומעלה)
- **npm** (v6 ומעלה)
- **Flutter** (v3.0 ומעלה)
- **MongoDB** (v4.0 ומעלה)

### פורטים נדרשים:
- **3000** - API Server
- **5173** - Admin Panel (Vite)

## בעיות נפוצות ופתרונות

### חיבור מסימולטור iOS
האפליקציה לא מצליחה להתחבר לשרת? הקובץ `environment_config.dart` כבר מעודכן להשתמש ב-`127.0.0.1` במקום `localhost` עבור סימולטור iOS.

אם עדיין יש בעיות:
```bash
# בדוק את כתובת ה-IP המקומית
./get-local-ip.sh
```

### MongoDB לא רץ
```bash
# macOS
brew services start mongodb-community

# Linux
sudo systemctl start mongod
```

### פורט תפוס
הסקריפט ינסה לסגור תהליכים קיימים אוטומטית.
אם נכשל, סגור ידנית:
```bash
# מציאת תהליך
lsof -i :3000

# סגירת תהליך
kill -9 <PID>
```

### Flutter לא מוצא מכשיר
```bash
# בדיקת מכשירים
flutter devices

# הרצת אמולטור
flutter emulators --launch <emulator-id>
```

## קבצי לוג

- **`api.log`** - לוג של שרת ה-API
- **`admin.log`** - לוג של פאנל הניהול

לצפייה בזמן אמת:
```bash
tail -f api.log
tail -f admin.log
```

## טיפים

1. **פיתוח**: השתמש ב-`run-all.sh` עם אפשרות 2 להתקנה ראשונית, ואז אפשרות 3 להרצות חוזרות
2. **דיבאג**: הרץ כל רכיב בנפרד (אפשרויות 4-6) לדיבאג קל יותר
3. **production**: אל תשתמש בסקריפטים אלו בסביבת production - הם מיועדים לפיתוח בלבד

---

*פותח עבור פרויקט Mental Coach* 